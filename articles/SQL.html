<!doctypehtml><html lang=ja><meta charset=utf-8><meta content="width=device-width,initial-scale=1"name=viewport><link href=../assets/stylesheet.css rel=stylesheet><script src=../assets/script.js></script><link href=../assets/favicon.png rel=icon><header><div class=content><div id=title></div><div class=header-logo><a href=../index.html><span></span></a></div><div class=menu><a href="index.html?tag=技術記録">HOME</a></div></div></header><div class=main><div class=content><pre>
    <code class=language-SQL>
    #MySQLに接続
    mysql -u root
    
    SQLの命令
    DDL     データを定義する
    DML     データを操作する
    DCL     データを制御する
    
    
    データベースの作成
    CREATE DATABASE データベース名;
    
    データベースを一覧表示
    SHOW DATABASES;
    
    データベースの削除
    DROP DATABASE データベース名;
    
    操作するデータベースの指定
    USE データベース名;
    
    テーブルを作成
    CREATE TABLE テーブル名 (カラム名1, カラム1の型, カラム名2, カラム2の型, ...);
    
    テーブルを一覧表示
    SHOW TABLES;
    
    テーブルのカラムを表示
    SHOW columns FROM テーブル名;
    
    カラムを１つ追加
    ALTER TABLE テーブル名 ADD カラム名 カラムの型;
    
    カラムを複数追加
    ALTER TABLE テーブル名 ADD (カラム名 カラムの型, ...);
    
    カラムの変更
    ALTER TABLE テーブル名 CHANGE 古いカラム名 新しいカラム名 新しいカラムの型;
    
    カラムの削除
    ALTER TABLE テーブル名 DROP カラム名;
    
    データを取得するカラムを指定
    SELECT カラム名 FROM テーブル名;
    
    全カラムからデータを取得する
    SELECT * FROM テーブル名;
    
    すべてのカラムに値を入れる
    INSERT INTO テーブル名 VALUES(値1, 値2, 値3);
    
    特定のカラムに値を入れる
    INSERT INTO テーブル名(カラム名1, カラム名2) VALUES(値1, 値2);
    
    データを更新
    UPDATE テーブル名 SET 変更内容 WHERE 条件;
    UPDATE goods SET price = 100 WHERE id = 2;
    
    データを削除
    DELETE FROM テーブル名 WHERE 条件;
    
    usersテーブルからlast_nameが「西園寺」のレコードを取得
    select *
    from users
    where last_name = "西園寺";
    
    LIKE句による文字列検索
    select *
    from users
    where prefecture
    LIKE "%府";
    
    AND演算子
    select *
    from users
    where age &lt;= 22 AND prefecture = "神奈川県";
    
    OR演算子
    select *
    from users
    where age &lt;= 22 OR prefecture = "神奈川県";
    
    NOT演算子
    select *
    from users
    where NOT prefecture = "神奈川県";
    
    BETWEEN演算子
    上下限を設定
    SELECT *
    FROM users
    WHERE age BETWEEN 21 AND 24;
    
    IN演算子
    １つのカラムに対してリストを指定
    select *
    from テーブル名
    where カラム名 IN (値1, 値2);
    
    JOIN句
    指定したテーブルのカラムに登録された値が一致するデータを基に、各テーブルのレコードを結合する。
    FROM テーブル名1
    JOIN テーブル名2 ON テーブル名1.カラム名1 = テーブル名2.カラム名2;
    
    CONCAT関数
    複数の文字列を結合する。
    CONCAT(文字列1, 文字列2);
    
    GROUP BY句
    特定のデータをグループ化する。
    GROUP BY カラム名;
    
    COUNT関数
    データの総量をカウントする。
    SELECT COUNT(カラム名);
    
    SELECT
        CONCAT(last_name, first_name) "名前",
        COUNT(*) "コマ数"
    FROM shifts s
    JOIN users u ON s.user_id = u.id
    WHERE date = "2020-04-01"
    GROUP BY user_id;
    
    サブクエリ
    ある検索結果を使用して、別のSQL文を実行する仕組み。
    SELECT *
    FROM users
    WHERE id NOT IN (
        SELECT user_id
        FROM shifts
        WHERE date = "2020-04-01";
    );
    </code>
    </pre></div></div><footer><div class=footer-logo>波浪世界</div><div class=content></div></footer>